<div class="row">
{{#each companies}}
<div class="card mx-auto my-4" style="width: 38rem;">
  <img id="logo" src="" class="card-img-top" alt="logo">
  <div id="itemName" class="card-title">{{this.name}}</div>
  <div class="card-body">
    <p id="itemDescription" class="card-text">{{this.title}}</p>
  </div>
</div>
{{/each}}
</div>

<div class="container">
    <canvas id="myChart"></canvas>
</div>

<script>
var ctx = document.getElementById('myChart');

window.onload = showItem; 

function showItem() {
    var logo = document.getElementById('logo');
    var itemName = document.getElementById('itemName');
    var itemDescription = document.getElementById('itemDescription');
 
   var url = window.location.pathname.split('/');
   var array = {
  'name' : url[1],
  'id' : url[2]
   };
   var id = array.id;

    axios
      .get("http://localhost:3000/companies?_page=1&_limit=5")
      .then(res => {
            var companiesArray = [];
            res.data.map((item)=>{
            companiesArray.push(item);
            console.log(item);
            console.log(companiesArray);
            });
    
    if(id === "1") {
      logo.src = companiesArray[0].logo;
      itemName.innerText = companiesArray[0].name;
      itemDescription.innerText = companiesArray[0].title;
      var companyName = companiesArray[0].name;
      var companyValue = companiesArray[0].value;
    }
    if(id === "2") {
      logo.src = companiesArray[1].logo;
      itemName.innerText = companiesArray[1].name;
      itemDescription.innerText = companiesArray[1].title;
      var companyName = companiesArray[1].name;
      var companyValue = companiesArray[1].value;
    } 
    if(id === "3") {
      logo.src = companiesArray[2].logo;
      itemName.innerText = companiesArray[2].name;
      itemDescription.innerText = companiesArray[2].title;
      var companyName = companiesArray[2].name;
      var companyValue = companiesArray[2].value;
    } 
    if(id === "4") {
      logo.src = companiesArray[3].logo;
      itemName.innerText = companiesArray[3].name;
      itemDescription.innerText = companiesArray[3].title;
      var companyName = companiesArray[3].name;
      var companyValue = companiesArray[3].value;
    } 
    if(id === "5") {
      logo.src = companiesArray[4].logo;
      itemName.innerText = companiesArray[4].name;
      itemDescription.innerText = companiesArray[4].title;
      var companyName = companiesArray[4].name;
      var companyValue = companiesArray[4].value;
    }


var myChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: ['01/01/20', '01/02/20', '01/03/20', '01/04/20', '01/05/20', '01/06/20'],
        datasets: [{
            label: companyName,
            data: [companyValue, 190, 30, 50, 20, 30],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        title: {
        display:true,
        text:'Company Prices',
        fontSize:22
        },
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        }
    }
});
})
      .catch(err => console.error(err))
      }
</script>